#!/bin/bash

DOTFILES_DIRECTORY="${HOME}/.dotfiles"
CHROMIUM_TYPE="snapshots"
CHROMIUM_URL="http://commondatastorage.googleapis.com/chromium-browser-${CHROMIUM_TYPE}/Win"
CHROMIUM_LATEST=$(curl -fs ${CHROMIUM_URL}/LAST_CHANGE)

cd ${DOTFILES_DIRECTORY}

source ./lib/utils

if os_is 'msys'; then
  # Get latest version
  e_header "Downloading Chromium..."
  curl -fLo ${HOME}/chromium-${CHROMIUM_LATEST}.exe ${CHROMIUM_URL}/${CHROMIUM_LATEST}/mini_installer.exe

  # Run the installer
  e_header "Installing Chromium..."
  ${HOME}/chromium-${CHROMIUM_LATEST}.exe

  # Clean up
  rm -rf ${HOME}/chromium-${CHROMIUM_LATEST}.exe

  # Finish
  e_success "Successfully installed Chromium."
else
  e_error "The Chromium Update script is currently only available for Windows."
fi
