#!/bin/bash

DOTFILES_DIRECTORY="${HOME}/.dotfiles"
cd ${DOTFILES_DIRECTORY}

source ./lib/utils

if os_is 'msys'; then
  # Configuration
  chromiumtype="snapshots"
  chromiumurl="http://commondatastorage.googleapis.com/chromium-browser-$chromiumtype/Win"
  chromiumlatest=$(curl -fs $chromiumurl/LAST_CHANGE)

  # Get latest version
  e_header "Downloading Chromium..."
  curl -fLo ${HOME}/chromium-$chromiumlatest.exe $chromiumurl/$chromiumlatest/mini_installer.exe

  # Run the installer
  e_header "Installing Chromium..."
  ${HOME}/chromium-$chromiumlatest.exe

  # Clean up
  rm -rf ${HOME}/chromium-$chromiumlatest.exe

  # Finish
  e_success "Successfully installed Chromium."
else
  e_error "The Chromium Update script is currently only available for Windows."
fi
