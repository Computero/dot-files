#!/bin/bash

# Test which OS the user runs
# $1 - cmd to test
os_is() {
  if [[ "$OSTYPE" == $1* ]]; then
    return 0
  fi
  return 1
}

# Header logging
e_header() {
  if os_is 'darwin'; then
    echo -e "\n$(tput setaf 7)$@$(tput sgr0)";
  else
    echo -e "\n\033[0;37m$@\033[m";
  fi
}

# Success logging
e_success() {
  if os_is 'darwin'; then
    echo -e "$(tput setaf 64)✓ $@$(tput sgr0)";
  else
    echo -e "\033[0;32m✓ $@\033[m";
  fi
}

# Error logging
e_error() {
  if os_is 'darwin'; then
    echo -e "$(tput setaf 1)x $@$(tput sgr0)";
  else
    echo -e "\033[0;31mx $@\033[m";
  fi
}

# Warning logging
e_warning() {
  if os_is 'darwin'; then
    echo -e "$(tput setaf 136)! $@$(tput sgr0)";
  else
    echo -e "\033[0;33m! $@\033[m";
  fi
}

# Test whether a command exists
# $1 - cmd to test
type_exists() {
  if [[ `type -P $1` ]]; then
    return 0
  fi
  return 1
}

# Test whether a Homebrew formula is already installed
# $1 - formula name (may include options)
formula_exists() {
  if ! `brew list $1 >/dev/null`; then
    e_warning "Missing formula: $1"
    return 1
  fi

  echo $1 "already installed."
  return 0
}
