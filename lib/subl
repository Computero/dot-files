#!/bin/bash
# Sublime Text 3 preferences

run_subl() {
    SUBLIME_DOTFILES="${DOTFILES_DIRECTORY}/subl"
    SUBLIME_DIRECTORY="${HOME}/Library/Application Support/Sublime Text 3/Packages"
    SUBLIME_USER_DIRECTORY="${SUBLIME_DIRECTORY}/User"

    log_header "Writing Sublime Text 3 preferences..."

    # If the User directory exists, remove it
    if [[ -d "${SUBLIME_USER_DIRECTORY}" ]]; then
        rm -rf "${SUBLIME_USER_DIRECTORY}"
    fi

    # Symlink the folder
    ln -fs "${SUBLIME_DOTFILES}" "${SUBLIME_USER_DIRECTORY}"

    # Create `~/bin` if it doesn't exist
    if [[ ! -d "${HOME}/bin" ]]; then
         mkdir "${HOME}/bin"
    fi

    # Create CLI symlink
    ln -s "/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl" "${HOME}/bin/slt"

    [[ $? ]] && log_success "Done"
}
